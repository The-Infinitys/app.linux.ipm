#!/bin/bash

# This script is used to build the project.
cd $(dirname "$0")/..
mkdir -p export && rm -rf export/*
mkdir -p export/build

# Build the project
cd ipm-core/
# Create Export workdir

cargo build
sudo rm -rf ./tmp
mkdir tmp
./target/debug/ipm system configure
cargo build --release
cp -r ./tmp/*  ../export/build
cp target/release/ipm ../export/build/bin/ipm
cd ../
cp ./build/source/install.sh ./export/build/install-ipm
cp ./build/source/uninstall.sh ./export/build/uninstall-ipm
echo "Complete to Packaging!"

